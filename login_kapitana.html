<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>Logowanie Kapitana</title>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    <style>
        body { font-family: Arial; padding: 50px; text-align: center; background-color: #f7f7f7; }
        .login-box { 
            width: 300px; 
            margin: 0 auto; 
            padding: 20px; 
            border: 1px solid #ccc; 
            background-color: white; 
            border-radius: 8px; 
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        input, button { 
            width: 90%; 
            padding: 10px; 
            margin: 10px 0; 
            border-radius: 4px; 
            border: 1px solid #ddd;
        }
        button { 
            background-color: #007bff; 
            color: white; 
            cursor: pointer; 
            border: none;
        }
    </style>
</head>
<body>

<div class="login-box">
    <h1>Logowanie Kapitana ⚽</h1>
    <input id="teamId" placeholder="ID/Nazwa Drużyny (np. TeamA)">
    <input type="password" id="password" placeholder="Hasło Kapitana">
    <button onclick="login()">Zaloguj</button>
    <p id="message" style="color: red;"></p>
</div>

<script>
    // UŻYJ SWOJEJ KONFIGURACJI FIREBASE
    const firebaseConfig = {
        apiKey: "AIzaSyC6r04aG6T5EYqJ4OClraYU5Jr34ffONwo",
        authDomain: "puchargwiazd-bdaa4.firebaseapp.com",
        databaseURL: "https://puchargwiazd-bdaa4-default-rtdb.europe-west1.firebasedatabase.app",
        projectId: "puchargwiazd-bdaa4",
        storageBucket: "puchargwiazd-bdaa4.firebasestorage.app",
        messagingSenderId: "890734185883",
        appId: "1:890734185883:web:4868b8bbf66c4bc7dfe53e"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    function login() {
        const teamId = document.getElementById("teamId").value.trim();
        const password = document.getElementById("password").value;
        const messageEl = document.getElementById("message");
        messageEl.textContent = "";

        if (!teamId || !password) {
            messageEl.textContent = "Wypełnij oba pola.";
            return;
        }

        // 1. Sprawdzamy hasło w gałęzi captains_access
       db.ref("teams/captains_access/" + teamId).once("value")
    .then(snapshot => {
        const correctPassword = snapshot.val();

                if (correctPassword === password) {
                    messageEl.textContent = "Zalogowano pomyślnie! Przekierowanie...";
                    // 2. W przypadku sukcesu, zapisujemy ID drużyny w sesji
                    sessionStorage.setItem('loggedInTeamId', teamId);
                    
                    // 3. Przekierowujemy do panelu edycji
                    window.location.href = "captain_panel.html"; 
                } else {
                    messageEl.textContent = "Błędny ID drużyny lub hasło.";
                }
            })
            .catch(error => {
                messageEl.textContent = "Błąd połączenia z bazą danych.";
                console.error("Błąd logowania:", error);
            });
    }
</script>

</body>

</html>
