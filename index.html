<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Puchar Gwiazd - Strona G≈Ç√≥wna</title>
    <meta name="description" content="Oficjalna strona Pucharu Gwiazd. Sprawd≈∫ najnowsze wyniki, nadchodzƒÖce mecze i tabele grup.">
    
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Montserrat:wght@500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <style>
        /* GLOBALNE STYLE */
        body {
            font-family: 'Roboto', sans-serif;
            background: linear-gradient(135deg, #e0f2f7 0%, #bbdefb 100%);
            color: #212121;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            box-sizing: border-box;
            overflow-x: hidden;
            transition: background 0.5s ease, color 0.5s ease;
        }

        body.dark-mode {
            background: linear-gradient(135deg, #1a237e 0%, #0d47a1 100%);
            color: #e0e0e0;
        }

        /* NAG≈Å√ìWEK (.header) - style z obu ≈∫r√≥de≈Ç */
        .header {
            width: 100%;
            max-width: 900px;
            margin-bottom: 30px;
            padding: 25px;
            background-color: #ffffff;
            border-radius: 15px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.25);
            border: 2px solid #64b5f6;
            opacity: 0;
            transform: translateY(-20px);
            animation: fadeInTop 1s ease-out forwards;
            position: relative;
            transition: background-color 0.5s ease, box-shadow 0.5s ease, border-color 0.5s ease;
            
            /* Domy≈õlny uk≈Çad dla PC */
            display: flex; 
            justify-content: space-between;
            align-items: center;
        }

        @keyframes fadeInTop {
            to { opacity: 1; transform: translateY(0); }
        }

        body.dark-mode .header {
            background-color: #263238;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.5);
            border-color: #37474f;
        }
        
        .header h1 {
            font-family: 'Montserrat', sans-serif;
            color: #1565c0;
            font-size: 3.2em;
            margin-bottom: 0; /* Zmienione na 0, bo logowanie jest obok */
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
            letter-spacing: 1px;
            transition: color 0.5s ease, text-shadow 0.5s ease;
        }
        body.dark-mode .header h1 {
            color: #90caf9;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        /* LINKI LOGOWANIA (.login-links) */
        .login-links {
            display: flex;
            gap: 15px;
        }
        .login-links a {
            color: white; /* Domy≈õlny kolor link√≥w z HTMLa, ale powinien byƒá ustalony w CSS */
            background-color: #1976d2; /* Dodany kolor t≈Ça dla lepszej widoczno≈õci link√≥w */
            text-decoration: none;
            font-weight: bold;
            padding: 8px 12px;
            border-radius: 5px;
            transition: background-color 0.3s;
        }
        .login-links a:hover {
            background-color: #2196f3;
        }
        body.dark-mode .login-links a {
            background-color: #0d47a1;
        }
        body.dark-mode .login-links a:hover {
            background-color: #1565c0;
        }

        /* NAWIGACJA (NAV) */
        #main-nav {
            width: 100%;
            max-width: 900px;
            background-color: #1976d2;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            margin-bottom: 30px;
            padding: 10px 0;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 20px;
            transition: background-color 0.5s ease, box-shadow 0.5s ease;
        }
        #main-nav ul {
            list-style: none; margin: 0; padding: 0; display: flex; gap: 20px; flex-wrap: wrap; justify-content: center;
        }
        #main-nav a {
            color: #ffffff; text-decoration: none; font-family: 'Montserrat', sans-serif; font-weight: 700; font-size: 1.1em;
            padding: 8px 15px; border-radius: 8px; transition: background-color 0.3s ease, transform 0.2s ease, color 0.3s ease;
        }
        #main-nav a:hover {
            background-color: #2196f3; transform: translateY(-2px);
        }
        body.dark-mode #main-nav {
            background-color: #0d47a1;
        }
        body.dark-mode #main-nav a:hover {
            background-color: #1565c0;
        }

        /* SEKCJA MECZOWA */
        .stats-summary {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
            gap: 15px;
            margin-top: 20px;
            width: 100%;
        }
        .stats-column {
            background-color: #fff;
            padding: 10px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
            flex: 1;
            min-width: 300px;
        }
        body.dark-mode .stats-column {
            background-color: #37474f;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        .stats-column h3 {
            color: #007bff;
            border-bottom: 2px solid #007bff;
            padding-bottom: 5px;
            text-align: center;
            font-size: 1.2em;
        }
        body.dark-mode .stats-column h3 {
            color: #90caf9;
            border-bottom-color: #90caf9;
        }
        
        /* OSTATECZNE POPRAWKI DLA WY≈öWIETLANIA MECZU (z pierwszego bloku) */
        .match-item { display: flex; align-items: center; padding: 5px 0; border-bottom: 1px dashed #eee; font-size: 0.85em; }
        body.dark-mode .match-item { border-bottom: 1px dashed #444; }

        .team-name { font-weight: 700; flex-grow: 1; min-width: 30px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; padding: 0 3px; text-align: right; }
        .team-name:last-of-type { text-align: left; }
        .score-box-container {
            display: flex; align-items: center; justify-content: center; width: 50px; flex-shrink: 0;
            font-size: 1em; font-weight: 900; color: #000;
        }
        body.dark-mode .score-box-container { color: #fff; }

        .status-tag {
            font-size: 0.6em; font-weight: bold; padding: 2px 4px; border-radius: 4px; flex-shrink: 0;
            margin-left: 3px; text-align: center;
        }
        .scheduled { background-color: #ffc107; color: #333; }
        .live { background-color: #dc3545; color: white; animation: pulse 1.5s infinite; }
        .finished { background-color: #28a745; color: white; }
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(220, 53, 69, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(220, 53, 69, 0); }
            100% { box-shadow: 0 0 0 0 rgba(220, 53, 69, 0); }
        }

        /* HERO BANNER i ODLICZANIE */
        .hero-banner {
            text-align: center; background: linear-gradient(135deg, #007bff 0%, #0056b3 100%);
            color: white; padding: 50px 20px; border-radius: 10px; margin-bottom: 30px;
        }
        .countdown {
            font-size: 2.2em; font-weight: bold; color: #e64a19; margin-bottom: 20px;
            display: flex; justify-content: center; flex-wrap: wrap; gap: 10px; text-align: center;
        }
        .countdown div {
            margin: 0 10px; background-color: #ffccbc; padding: 10px 15px;
            border-radius: 8px; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); min-width: 80px; text-align: center;
        }
        .countdown span {
            display: block; font-size: 0.5em; color: #d84315; margin-top: 5px;
        }
        body.dark-mode .countdown { color: #ff7043; }
        body.dark-mode .countdown div { background-color: #5d4037; }
        body.dark-mode .countdown span { color: #ffab91; }


        /* SEKCJA RESPONSIVE DLA TELEFON√ìW */
        @media (max-width: 768px) {
            body { padding: 10px; }

            .header, .content-section, .footer, #main-nav {
                padding: 15px;
                margin-left: 0;
                margin-right: 0;
            }
            
            /* üî• KLUCZOWE POPRAWKI DLA LOGOWANIA NA TELEFONIE üî• */
            .header {
                /* Ustawia tytu≈Ç i linki jeden pod drugim na telefonie */
                flex-direction: column; 
                align-items: center;
                display: flex; 
            }

            .login-links {
                margin-top: 15px; /* Dodatkowy odstƒôp od H1 */
                gap: 15px;
            }

            /* Ukrycie tekstu ("Kapitan", "Admin") i pozostawienie samych ikon */
            .login-links a {
                font-size: 0; 
                padding: 10px; /* Zwiƒôkszony obszar do klikniƒôcia */
                min-width: 30px; 
                display: flex;
                justify-content: center;
                align-items: center;
            }

            /* Upewnienie siƒô, ≈ºe ikony sƒÖ widoczne i majƒÖ odpowiedni rozmiar */
            .login-links a i {
                font-size: 1.4rem; /* Wiƒôkszy rozmiar ikony na telefonie */
                margin: 0;
            }
            /* Koniec kluczowych poprawek */

            /* Zmniejszenie rozmiaru nag≈Ç√≥wk√≥w na telefonie */
            .header h1 {
                font-size: 2.5em;
            }
            .content-section h2 {
                font-size: 2em;
                margin-bottom: 15px;
                padding-bottom: 10px;
            }
            #main-nav a {
                font-size: 1em;
                padding: 6px 10px;
            }

            .team-card {
                min-width: 100%; /* Pe≈Çna szeroko≈õƒá na telefonie */
            }

            .stats-column {
                min-width: 100%; /* Pe≈Çna szeroko≈õƒá na telefonie */
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Puchar Gwiazd</h1>
        <div class="login-links">
            <a href="login_kapitan.html"><i class="fas fa-user-shield"></i> Kapitan</a>
            <a href="admin.html"><i class="fas fa-user-cog"></i> Admin</a>
        </div>
        <div id="current-time" style="display: none;"></div>
    </div>

    <nav id="main-nav">
        <ul>
            <li><a href="index.html">Strona G≈Ç√≥wna</a></li>
            <li><a href="druzyny.html">Dru≈ºyny</a></li>
            <li><a href="regulamin.html">Regulamin</a></li>
            <li><a href="tabela.html">Tabele Grup</a></li>
            <li><a href="onas.html">O Nas</a></li>
            <li><a href="pusta-strona.html">Pusta Strona</a></li>
        </ul>
    </nav>

    <section class="content-section">
        <div class="hero-banner">
            <h1>‚≠ê Oficjalna Strona Pucharu Gwiazd ‚≠ê</h1>
            <p>≈öled≈∫ na ≈ºywo wyniki, tabele grup i aktualno≈õci z najwiƒôkszego turnieju!</p>
        </div>
        
        <h2>‚è∞ Start Turnieju!</h2>
        <div id="countdown" class="countdown">
            <p>≈Åadowanie odliczania...</p>
        </div>

        <h2>Aktualizacje Meczowe</h2>
        <div class="stats-summary">
            <div id="upcoming-matches" class="stats-column">
                <h3><i class="fas fa-calendar-alt"></i> NadchodzƒÖce Mecze</h3>
                <p style="text-align: center;">≈Åadowanie...</p>
            </div>
            
            <div id="recent-results" class="stats-column">
                <h3><i class="fas fa-trophy"></i> Ostatnie Wyniki</h3>
                <p style="text-align: center;">≈Åadowanie...</p>
            </div>
        </div>
        
        <div style="margin-top: 40px; text-align: center;">
            <a href="tabela.html" class="button" style="padding: 12px 25px; background-color: #28a745; color: white; border-radius: 5px; text-decoration: none; font-weight: bold;">Zobacz Pe≈Çne Tabele Grup</a>
        </div>
    </section>

    <div class="footer">
        <p>¬© 2025 Puchar Gwiazd. Wszystkie prawa zastrze≈ºone.</p>
        <div class="social-media-links">
            <a href="https://www.tiktok.com/@puchar.gwiazd" target="_blank"><i class="fab fa-tiktok"></i></a>
            <a href="https://www.instagram.com/puchargwiazd/" target="_blank"><i class="fab fa-instagram"></i></a>
        </div>
    </div>

    <button id="theme-toggle">
        <i class="fas fa-moon"></i>
    </button>

    <script src="script.js"></script>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyC6r04aG6T5EYqJ4OClraYU5Jr34ffONwo",
            authDomain: "puchargwiazd-bdaa4.firebaseapp.com",
            databaseURL: "https://puchargwiazd-bdaa4-default-rtdb.europe-west1.firebasedatabase.app", 
            projectId: "puchargwiazd-bdaa4",
            storageBucket: "puchargwiazd-bdaa4.firebasestorage.app",
            messagingSenderId: "890734185883",
            appId: "1:890734185883:web:4868b8bbf66c4bc7dfe53e"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();
        
        const TEAMS_BASE_PATH = "teams/teams"; 
        const MATCHES_PATH = "matches"; 
        
        let teamsMap = {};

        function loadTeamNames() {
            return db.ref(TEAMS_BASE_PATH).once('value').then(snapshot => {
                const data = snapshot.val();
                if (data) {
                    Object.entries(data).forEach(([id, team]) => {
                        teamsMap[id] = team.name || id; 
                    });
                }
            });
        }

        function renderMatches(matches) {
            const upcomingContainer = document.getElementById('upcoming-matches');
            const recentContainer = document.getElementById('recent-results');
            
            upcomingContainer.innerHTML = '<h3><i class="fas fa-calendar-alt"></i> NadchodzƒÖce Mecze</h3>';
            recentContainer.innerHTML = '<h3><i class="fas fa-trophy"></i> Ostatnie Wyniki</h3>';

            const upcoming = [];
            const recent = [];
            const live = [];

            Object.values(matches).forEach(match => {
                match.teamAName = teamsMap[match.teamA] || match.teamA;
                match.teamBName = teamsMap[match.teamB] || match.teamB;

                if (match.status === 'scheduled') {
                    upcoming.push(match);
                } else if (match.status === 'finished') {
                    recent.push(match);
                } else if (match.status === 'live') {
                    live.push(match);
                }
            });
            
            const displayRecent = [...live, ...recent.slice(-5)].reverse();
            const displayUpcoming = [...live, ...upcoming.slice(0, 5)];

            if (displayUpcoming.length > 0) {
                displayUpcoming.forEach(match => {
                    upcomingContainer.innerHTML += createMatchHtml(match);
                });
            } else {
                upcomingContainer.innerHTML += '<p style="text-align: center; color: #888;">Brak zaplanowanych mecz√≥w.</p>';
            }

            if (displayRecent.length > 0) {
                displayRecent.forEach(match => {
                    recentContainer.innerHTML += createMatchHtml(match);
                });
            } else {
                recentContainer.innerHTML += '<p style="text-align: center; color: #888;">Brak ostatnich wynik√≥w.</p>';
            }
        }

        function createMatchHtml(match) {
            const statusClass = match.status;
            let scoreContent;
            
            if (match.status === 'finished' || match.status === 'live') {
                scoreContent = `${match.scoreA} - ${match.scoreB}`;
            } else {
                scoreContent = `vs`;
            }

            const statusText = {
                'scheduled': 'Zaplanowany',
                'live': 'NA ≈ªYWO',
                'finished': 'ZAKO≈ÉCZONY'
            }[match.status] || match.status;

            return `
                <div class="match-item">
                    <span class="team-name" style="text-align: right;">${match.teamAName}</span>
                    
                    <div class="score-box-container">
                        ${scoreContent}
                    </div>

                    <span class="team-name" style="text-align: left;">${match.teamBName}</span>
                    
                    <span class="status-tag ${statusClass}">${statusText} (Gr. ${match.group})</span>
                </div>
            `;
        }

        function startCountdown() {
            // Data i czas docelowy: 14 grudnia 2025, 10:00:00 CET
            const countDownDate = new Date("Dec 14, 2025 10:00:00").getTime();
            const countdownElement = document.getElementById("countdown");

            const x = setInterval(function() {
                const now = new Date().getTime();
                const distance = countDownDate - now;

                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);

                if (distance < 0) {
                    clearInterval(x);
                    countdownElement.innerHTML = "<div>Turniej trwa!</div>";
                } else {
                    countdownElement.innerHTML = `
                        <div>${days}<span>Dni</span></div>
                        <div>${hours}<span>Godzin</span></div>
                        <div>${minutes}<span>Minut</span></div>
                        <div>${seconds}<span>Sekund</span></div>
                    `;
                }
            }, 1000);
        }

        // Inicjalizacja: za≈Çaduj nazwy, rozpocznij s≈Çuchanie mecz√≥w i odliczanie
        loadTeamNames().then(() => {
            db.ref(MATCHES_PATH).on('value', snapshot => {
                const matchesData = snapshot.val();
                if (matchesData) {
                    renderMatches(matchesData);
                } else {
                    document.getElementById('upcoming-matches').innerHTML = '<h3><i class="fas fa-calendar-alt"></i> NadchodzƒÖce Mecze</h3><p style="text-align: center;">Brak danych meczowych.</p>';
                    document.getElementById('recent-results').innerHTML = '<h3><i class="fas fa-trophy"></i> Ostatnie Wyniki</h3><p style="text-align: center;">Brak danych meczowych.</p>';
                }
            });
            startCountdown(); 
        }).catch(error => {
            console.error("B≈ÇƒÖd ≈Çadowania danych poczƒÖtkowych: ", error);
            document.getElementById('upcoming-matches').innerHTML = '<p style="color: red; text-align: center;">B≈ÇƒÖd ≈Çadowania danych.</p>';
            document.getElementById('recent-results').innerHTML = '<p style="color: red; text-align: center;">B≈ÇƒÖd ≈Çadowania danych.</p>';
        });

    </script>
</body>
</html>
