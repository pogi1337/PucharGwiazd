<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Puchar Gwiazd | Strona Główna</title>
    
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/png" href="logo.png">

    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css">
    
    <style>
        /* --- STYLE PODSTAWOWE --- */
        body {
            background: linear-gradient(rgba(5, 10, 24, 0.85), rgba(5, 10, 24, 0.95)), url('1.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            min-height: 100vh;
            color: #fff;
            overflow-x: hidden;
            margin: 0;
            font-family: 'Plus Jakarta Sans', sans-serif;
        }

        /* NAVBAR */
        .navbar {
            display: flex; justify-content: space-between; align-items: center;
            padding: 15px 5%; background: rgba(15, 23, 42, 0.95);
            border-bottom: 1px solid rgba(255,255,255,0.1); position: sticky; top: 0; z-index: 1000;
            backdrop-filter: blur(10px);
        }
        .logo-link { text-decoration: none; display: flex; align-items: center; color: inherit; }
        
        .nav-links { display: flex; align-items: center; }
        .nav-links a { 
            color: #ccc; text-decoration: none; margin-left: 20px; 
            font-weight: 600; text-transform: uppercase; font-size: 0.85rem; transition: 0.3s; 
        }
        .nav-links a:hover, .nav-links a.active { color: #00d4ff; }
        
        /* Styl dla przycisku Kapitana */
        .nav-btn-captain {
            border: 1px solid #00d4ff; padding: 8px 15px; border-radius: 6px; color: #00d4ff !important;
        }
        .nav-btn-captain:hover { background: rgba(0, 212, 255, 0.1); box-shadow: 0 0 15px rgba(0, 212, 255, 0.3); }

        /* Styl dla Admina */
        .nav-link-admin { color: #555 !important; font-size: 0.75rem !important; }
        .nav-link-admin:hover { color: #fff !important; }

        /* HAMBURGER MENU (Domyślnie ukryty na PC) */
        .hamburger {
            display: none;
            cursor: pointer;
            z-index: 1001;
        }
        .bar {
            display: block;
            width: 25px;
            height: 3px;
            margin: 5px auto;
            transition: all 0.3s ease-in-out;
            background-color: #fff;
            border-radius: 3px;
        }

        /* HERO SECTION */
        .hero { 
            text-align: center; 
            padding: 60px 20px 20px 20px; 
            display: flex; flex-direction: column; align-items: center;
        }
        .hero-logo {
            height: 120px; width: auto; margin-bottom: 20px;
            filter: drop-shadow(0 0 15px rgba(0, 212, 255, 0.3));
            animation: float 6s ease-in-out infinite;
        }
        .hero h1 { font-size: 3.5rem; margin: 10px 0; text-transform: uppercase; letter-spacing: 3px; font-weight: 800; text-shadow: 0 0 20px rgba(0,0,0,0.5); }
        .hero p { color: #aaa; font-size: 1.2rem; margin-bottom: 30px; }

        /* SOCIAL LINKS */
        .social-links { margin-bottom: 40px; display: flex; gap: 20px; justify-content: center; }
        .social-btn {
            width: 50px; height: 50px; border-radius: 50%;
            background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);
            display: flex; justify-content: center; align-items: center;
            color: #fff; font-size: 1.2rem; transition: 0.3s; text-decoration: none;
        }
        .social-btn:hover { background: #00d4ff; color: #000; transform: translateY(-5px); box-shadow: 0 5px 15px rgba(0, 212, 255, 0.4); }

        /* LICZNIK CZASU */
        .countdown-box { display: flex; justify-content: center; gap: 15px; margin-bottom: 30px; flex-wrap: wrap; }
        .time-unit {
            background: rgba(0, 212, 255, 0.05); border: 1px solid rgba(0, 212, 255, 0.3);
            padding: 15px 20px; border-radius: 12px; min-width: 90px; text-align: center;
            backdrop-filter: blur(5px);
        }
        .time-val { font-size: 2.2rem; font-weight: 800; display: block; color: #fff; text-shadow: 0 0 10px rgba(0, 212, 255, 0.5); }
        .time-label { font-size: 0.75rem; color: #00d4ff; text-transform: uppercase; letter-spacing: 1px; margin-top: 5px; }

        /* STATYSTYKI */
        .stats-container {
            display: flex; justify-content: center; gap: 60px; margin: 20px auto 60px auto; flex-wrap: wrap;
            padding: 30px; background: rgba(0,0,0,0.3); border-radius: 20px; max-width: 900px;
            border: 1px solid rgba(0, 212, 255, 0.1);
        }
        .stat-box { text-align: center; position: relative; min-width: 120px; }
        .stat-icon { 
            font-size: 2.5rem; margin-bottom: 10px; color: #00d4ff;
            filter: drop-shadow(0 0 10px rgba(0, 212, 255, 0.6)); 
        }
        .stat-number { 
            font-size: 3.5rem; font-weight: 800; display: block; line-height: 1; color: #fff;
            text-shadow: 0 0 15px rgba(0, 212, 255, 0.8), 0 0 30px rgba(0, 212, 255, 0.4);
        }
        .stat-label { 
            font-size: 0.85rem; color: #ccc; text-transform: uppercase; letter-spacing: 2px; 
            margin-top: 5px; font-weight: 700; 
        }

        /* CENTRUM MECZOWE */
        .dashboard-container { max-width: 900px; margin: 0 auto 60px auto; padding: 0 20px; }
        .match-row {
            display: grid; grid-template-columns: 1fr auto 1fr; align-items: center;
            background: rgba(30, 41, 59, 0.6); border: 1px solid rgba(255,255,255,0.1);
            margin-bottom: 12px; padding: 18px; border-radius: 16px;
            backdrop-filter: blur(10px); transition: 0.3s;
        }
        .match-row:hover { transform: translateY(-3px); background: rgba(30, 41, 59, 0.8); border-color: rgba(255,255,255,0.3); }
        
        .status-live { border-left: 4px solid #ff4d4d; background: linear-gradient(90deg, rgba(255,77,77,0.1), transparent); }
        .status-planned { border-left: 4px solid #00d4ff; }
        .status-finished { border-left: 4px solid #94a3b8; opacity: 0.7; }

        .team { font-weight: 700; font-size: 1.1rem; }
        .team-home { text-align: right; }
        .team-away { text-align: left; }
        
        .score-badge {
            background: rgba(0,0,0,0.4); padding: 5px 15px; border-radius: 8px;
            font-weight: 800; color: #00d4ff; font-size: 1.2rem; margin: 0 15px;
            border: 1px solid rgba(255,255,255,0.05);
        }
        .status-live .score-badge { color: #ff4d4d; border-color: #ff4d4d; animation: pulse 1.5s infinite; }
        .match-meta { font-size: 0.7rem; color: #aaa; margin-top: 5px; text-transform: uppercase; text-align: center; }

        /* NEWSY */
        .news-section { max-width: 1000px; margin: 0 auto 60px auto; padding: 0 20px; }
        .news-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px; }
        .news-card {
            background: rgba(30, 41, 59, 0.6); border: 1px solid rgba(255,255,255,0.1);
            border-radius: 16px; padding: 25px; transition: 0.3s; cursor: pointer;
            display: flex; flex-direction: column; position: relative; overflow: hidden;
        }
        .news-card:hover { transform: translateY(-5px); border-color: #00d4ff; box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        .news-date { font-size: 0.75rem; color: #00d4ff; text-transform: uppercase; font-weight: 700; margin-bottom: 10px; }
        .news-title { font-size: 1.3rem; font-weight: 700; margin: 0 0 10px 0; color: #fff; line-height: 1.3; }
        .read-more { margin-top: 15px; color: #00d4ff; font-size: 0.9rem; font-weight: 600; display: inline-flex; align-items: center; gap: 5px; }

        /* MODAL */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.95); z-index: 9999; display: none;
            justify-content: center; align-items: center; padding: 20px; animation: fadeIn 0.3s ease;
        }
        .modal-content {
            background: #1e293b; width: 100%; max-width: 700px; max-height: 90vh; overflow-y: auto;
            border-radius: 20px; padding: 40px; position: relative; border: 1px solid rgba(255,255,255,0.1);
            box-shadow: 0 0 50px rgba(0, 212, 255, 0.15); animation: slideUp 0.3s ease;
        }
        .close-modal { position: absolute; top: 20px; right: 25px; font-size: 2rem; color: #aaa; cursor: pointer; background: none; border: none; }
        
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }
        @keyframes fadeIn { from {opacity:0;} to {opacity:1;} }
        @keyframes slideUp { from {transform:translateY(30px);} to {transform:translateY(0);} }

        /* --- MEDIA QUERIES (RESPONSYWNOŚĆ) --- */
        @media(max-width:992px) {
            /* Pokaż hamburgera */
            .hamburger { display: block; }

            /* Zmiana przycisku hamburgera w X po aktywacji */
            .hamburger.active .bar:nth-child(2) { opacity: 0; }
            .hamburger.active .bar:nth-child(1) { transform: translateY(8px) rotate(45deg); }
            .hamburger.active .bar:nth-child(3) { transform: translateY(-8px) rotate(-45deg); }

            /* Ukryj menu domyślnie, pokaż jako kolumnę po aktywacji */
            .nav-links {
                position: absolute;
                top: 70px; /* Wysokość navbara */
                left: 0;
                width: 100%;
                background: rgba(15, 23, 42, 0.98);
                flex-direction: column;
                align-items: center;
                gap: 20px;
                padding: 30px 0;
                /* Płynne pojawianie się */
                opacity: 0;
                transform: translateY(-20px);
                pointer-events: none;
                transition: all 0.3s ease-in-out;
                border-bottom: 1px solid rgba(255,255,255,0.1);
            }

            .nav-links.active {
                opacity: 1;
                transform: translateY(0);
                pointer-events: auto;
            }

            .nav-links a { margin: 0; font-size: 1rem; }
        }

        @media(max-width:768px) {
            .hero h1 { font-size: 2rem; }
            .hero-logo { height: 80px; }
            .match-row { padding: 15px; gap: 10px; grid-template-columns: 1fr; text-align: center; }
            .team { text-align: center; }
            .score-info { margin: 10px 0; }
            .stats-container { gap: 30px; }
        }
    </style>
</head>
<body>

    <nav class="navbar">
        <a href="index.html" class="logo-link">
            <img src="logo.png" alt="PG" style="height:35px; margin-right:10px;"> 
            <span style="font-weight:800; color:#00d4ff; letter-spacing:1px;">PUCHAR GWIAZD</span>
        </a>

        <div class="hamburger">
            <span class="bar"></span>
            <span class="bar"></span>
            <span class="bar"></span>
        </div>

        <div class="nav-links">
            <a href="index.html" class="active">Start</a>
            <a href="druzyny.html">Drużyny</a>
            <a href="terminarz.html">Terminarz</a>
            <a href="tabela.html">Tabele</a>
            <a href="regulamin.html">Regulamin</a>
            <a href="onas.html">O nas</a>
            <a href="glosowanie.html">Głosowanie</a>
            
            <a href="login_kapitana.html" class="nav-btn-captain">Panel Kapitana</a>
            <a href="admin.html" class="nav-link-admin">Admin</a>
        </div>
    </nav>

    <div class="hero" data-aos="fade-down">
        <img src="logo.png" alt="Logo Puchar Gwiazd" class="hero-logo">
        
        <h1>PUCHAR GWIAZD</h1>
        <p>Pasja • Emocje • Rywalizacja</p>

        <div class="social-links">
            <a href="https://www.facebook.com/profile.php?id=61576684634802" class="social-btn" target="_blank" rel="noopener noreferrer"><i class="fab fa-facebook-f"></i></a>
            <a href="https://www.instagram.com/puchargwiazd/" class="social-btn" target="_blank" rel="noopener noreferrer"><i class="fab fa-instagram"></i></a>
            <a href="https://www.youtube.com/@PucharGwiazd" class="social-btn" target="_blank" rel="noopener noreferrer"><i class="fab fa-youtube"></i></a>
            <a href="https://www.tiktok.com/@puchar.gwiazd" class="social-btn" target="_blank" rel="noopener noreferrer"><i class="fab fa-tiktok"></i></a>
        </div>
        
        <div id="timer" class="countdown-box">
            <div class="time-unit"><span class="time-val" id="days">00</span><span class="time-label">Dni</span></div>
            <div class="time-unit"><span class="time-val" id="hours">00</span><span class="time-label">Godz</span></div>
            <div class="time-unit"><span class="time-val" id="minutes">00</span><span class="time-label">Min</span></div>
            <div class="time-unit"><span class="time-val" id="seconds">00</span><span class="time-label">Sek</span></div>
        </div>
    </div>

    <div class="stats-container" data-aos="zoom-in">
        <div class="stat-box">
            <i class="fas fa-trophy stat-icon"></i>
            <span class="stat-number count-up" data-target="5">0</span>
            <span class="stat-label">ZREALIZOWANYCH EDYCJI</span>
        </div>
        
        <div class="stat-box">
            <i class="fas fa-users stat-icon"></i>
            <span class="stat-number count-up" data-target="16">0</span>
            <span class="stat-label">DRUŻYN</span>
        </div>

        <div class="stat-box">
            <i class="fas fa-volleyball-ball stat-icon" style="color: #ff9900; filter: drop-shadow(0 0 10px rgba(255, 153, 0, 0.6));"></i>
            <span class="stat-number count-up" data-target="1" style="text-shadow: 0 0 15px rgba(255, 153, 0, 0.8);">0</span>
            <span class="stat-label">SIATKÓWKA</span>
        </div>
    </div>

    <div class="dashboard-container" data-aos="fade-up">
        <h3 style="text-align:center; color:#fff; margin-bottom:25px; text-transform:uppercase; letter-spacing:2px; font-size:1rem; opacity:0.8;">Centrum Meczowe</h3>
        <div id="match-dashboard">
            <div style="text-align:center; color:#aaa; padding:20px;">Ładowanie meczów...</div>
        </div>
        <div style="text-align:center; margin-top:20px;">
            <a href="terminarz.html" style="color:#00d4ff; text-decoration:none; font-size:0.9rem; font-weight:600; border-bottom:1px solid rgba(0, 212, 255, 0.3); padding-bottom:2px;">Zobacz pełny terminarz</a>
        </div>
    </div>

    <div class="news-section" data-aos="fade-up">
        <h3 style="text-align:center; color:#fff; margin-bottom:30px; text-transform:uppercase; letter-spacing:2px; font-size:1rem; opacity:0.8;">
            Aktualności
        </h3>
        <div id="news-grid" class="news-grid">
            <div style="text-align:center; width:100%; color:#888;">Ładowanie newsów...</div>
        </div>
    </div>

    <div id="news-modal" class="modal-overlay" onclick="closeNewsModal(event)">
        <div class="modal-content">
            <button class="close-modal" onclick="closeNewsModal(event, true)">&times;</button>
            <span id="modal-date" style="color:#00d4ff; font-weight:bold; font-size:0.9rem;">DATA</span>
            <h2 id="modal-title" style="color:#fff; margin:10px 0 20px 0; font-size:2rem; line-height:1.2;">TYTUŁ</h2>
            <div id="modal-text" style="color:#ccc; font-size:1.1rem; line-height:1.6; white-space:pre-line;">TREŚĆ</div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
    <script> AOS.init(); </script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyC6r04aG6T5EYqJ4OClraYU5Jr34ffONwo",
            authDomain: "puchargwiazd-bdaa4.firebaseapp.com",
            projectId: "puchargwiazd-bdaa4",
            storageBucket: "puchargwiazd-bdaa4.firebasestorage.app",
            messagingSenderId: "890734185883",
            appId: "1:890734185883:web:75e8df76127397b913612d"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // --- OBSŁUGA HAMBURGER MENU ---
        const hamburger = document.querySelector(".hamburger");
        const navMenu = document.querySelector(".nav-links");

        hamburger.addEventListener("click", () => {
            hamburger.classList.toggle("active");
            navMenu.classList.toggle("active");
        });

        // Zamknij menu po kliknięciu w link
        document.querySelectorAll(".nav-links a").forEach(n => n.addEventListener("click", () => {
            hamburger.classList.remove("active");
            navMenu.classList.remove("active");
        }));

        // 1. ODLICZANIE LICZB
        function animateStats() {
            const counters = document.querySelectorAll('.count-up');
            counters.forEach(counter => {
                const target = +counter.getAttribute('data-target');
                const duration = 2000; 
                const increment = target / (duration / 16); 

                let current = 0;
                const updateCounter = () => {
                    current += increment;
                    if (current < target) {
                        counter.innerText = Math.ceil(current);
                        requestAnimationFrame(updateCounter);
                    } else {
                        counter.innerText = target;
                    }
                };
                updateCounter();
            });
        }
        window.addEventListener('load', animateStats);


        // 2. ODLICZANIE CZASU
        const targetDate = new Date("2024-06-20T18:00:00").getTime();
        setInterval(() => {
            const now = new Date().getTime();
            const diff = targetDate - now;
            if (diff > 0) {
                document.getElementById("days").innerText = Math.floor(diff / (1000 * 60 * 60 * 24)).toString().padStart(2,'0');
                document.getElementById("hours").innerText = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)).toString().padStart(2,'0');
                document.getElementById("minutes").innerText = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60)).toString().padStart(2,'0');
                document.getElementById("seconds").innerText = Math.floor((diff % (1000 * 60)) / 1000).toString().padStart(2,'0');
            }
        }, 1000);

        // 3. MECZE
        db.collection('matches').onSnapshot(snap => {
            let all = [];
            snap.forEach(doc => all.push(doc.data()));

            let live = all.filter(m => m.status === 'live');
            let planned = all.filter(m => m.status === 'planned' || !m.status);
            let finished = all.filter(m => m.status === 'finished');

            planned.sort((a,b) => (a.date+(a.time||'')).localeCompare(b.date+(b.time||'')));
            finished.sort((a,b) => (b.date+(b.time||'')).localeCompare(a.date+(a.time||'')));

            let displayList = [];
            if(live.length > 0) displayList.push(live[0]);
            displayList = displayList.concat(planned.slice(0, 2));
            displayList = displayList.concat(finished.slice(0, 2));

            const container = document.getElementById('match-dashboard');
            container.innerHTML = '';

            if(displayList.length === 0) {
                container.innerHTML = '<div style="text-align:center; color:#aaa;">Brak meczów</div>';
                return;
            }

            displayList.forEach(m => {
                const h = m.home || m.team1 || "Drużyna 1";
                const a = m.away || m.team2 || "Drużyna 2";
                
                let css = 'status-planned';
                let score = m.time || '-:-';
                let meta = `PLANOWANY: ${m.date}`;

                if(m.status === 'live') {
                    css = 'status-live';
                    score = `${m.homeScore}:${m.awayScore}`;
                    meta = 'NA ŻYWO';
                } else if(m.status === 'finished') {
                    css = 'status-finished';
                    score = `${m.homeScore}:${m.awayScore}`;
                    meta = `KONIEC (${m.date})`;
                }

                container.innerHTML += `
                    <div class="match-row ${css}">
                        <div class="team team-home">${h}</div>
                        <div class="score-info">
                            <div class="score-badge">${score}</div>
                            <div class="match-meta">${meta}</div>
                        </div>
                        <div class="team team-away">${a}</div>
                    </div>
                `;
            });
        });

        // 4. NEWSY + MODAL
        db.collection('news').orderBy('createdAt', 'desc').limit(4).onSnapshot(snap => {
            const container = document.getElementById('news-grid');
            container.innerHTML = '';

            if (snap.empty) {
                container.innerHTML = '<div style="text-align:center; width:100%; color:#666;">Brak newsów.</div>';
                return;
            }

            snap.forEach(doc => {
                const n = doc.data();
                let shortText = n.content || "";
                if(shortText.length > 100) shortText = shortText.substring(0, 100) + "...";
                
                const safeTitle = (n.title || "").replace(/'/g, "&#39;").replace(/"/g, "&quot;");
                const safeDate = (n.date || "").replace(/'/g, "&#39;");
                const safeContent = (n.content || "").replace(/'/g, "&#39;").replace(/"/g, "&quot;").replace(/\n/g, "<br>");

                container.innerHTML += `
                    <div class="news-card" onclick="openNewsModal('${safeTitle}', '${safeDate}', '${safeContent}')">
                        <span class="news-date">${n.date}</span>
                        <div class="news-title">${n.title}</div>
                        <div class="news-excerpt" style="color:#aaa; font-size:0.9rem;">${shortText}</div>
                        <div class="read-more">Czytaj dalej <i class="fas fa-arrow-right"></i></div>
                    </div>
                `;
            });
        });

        function openNewsModal(title, date, content) {
            document.getElementById('modal-title').innerHTML = title;
            document.getElementById('modal-date').innerText = date;
            document.getElementById('modal-text').innerHTML = content;
            document.getElementById('news-modal').style.display = 'flex';
        }

        function closeNewsModal(event, force) {
            if (force || event.target.id === 'news-modal') {
                document.getElementById('news-modal').style.display = 'none';
            }
        }
    </script>
</body>
</html>

