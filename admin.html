<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel Managera - Puchar Gwiazd</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        :root {
            /* Paleta kolorów */
            --bg-body: #050a18;
            --sidebar-bg: rgba(15, 23, 42, 0.6);
            --card-bg: rgba(255, 255, 255, 0.03);
            --border: rgba(255, 255, 255, 0.1);
            --text-main: #ffffff;
            --text-muted: #a0aec0;
            --accent: #00d4ff;
            --primary: #0055ff;
            --success: #00ff88;
            --danger: #ff4d4d;
            --warning: #f59e0b;
        }

        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: var(--bg-body);
            background-image: linear-gradient(rgba(5, 10, 24, 0.95), rgba(5, 10, 24, 0.98)), url('1.jpg');
            background-size: cover;
            background-attachment: fixed;
            margin: 0;
            display: flex;
            height: 100vh;
            overflow: hidden;
            color: var(--text-main);
        }

        * { box-sizing: border-box; scrollbar-width: thin; scrollbar-color: var(--accent) var(--bg-body); }

        /* --- LOGIN SCREEN --- */
        #login-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #050a18;
            display: flex; justify-content: center; align-items: center; z-index: 9999;
        }
        .login-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            padding: 40px; border-radius: 24px; width: 100%; max-width: 400px;
            text-align: center; border: 1px solid var(--border);
            box-shadow: 0 0 50px rgba(0, 212, 255, 0.1);
        }
        .login-card h2 { color: var(--accent); margin-top: 0; font-weight: 800; letter-spacing: 1px; }

        /* --- SIDEBAR --- */
        .sidebar {
            width: 280px;
            background-color: var(--sidebar-bg);
            backdrop-filter: blur(15px);
            border-right: 1px solid var(--border);
            display: flex; flex-direction: column; padding: 30px 20px; flex-shrink: 0;
            transition: 0.3s;
        }
        .logo { 
            font-size: 1.5rem; font-weight: 800; color: white; margin-bottom: 50px; 
            display: flex; align-items: center; gap: 15px; text-transform: uppercase; letter-spacing: 1px;
        }
        .logo i { color: var(--accent); filter: drop-shadow(0 0 10px var(--accent)); }

        .menu-btn {
            background: transparent; border: 1px solid transparent; color: var(--text-muted);
            text-align: left; padding: 16px 20px; margin-bottom: 10px; cursor: pointer;
            border-radius: 12px; font-size: 0.95rem; font-weight: 600;
            display: flex; align-items: center; gap: 15px; transition: all 0.3s ease;
        }
        .menu-btn:hover { background: rgba(255,255,255,0.05); color: white; border-color: rgba(255,255,255,0.1); transform: translateX(5px); }
        .menu-btn.active { 
            background: linear-gradient(90deg, rgba(0, 212, 255, 0.15), transparent); 
            color: var(--accent); border-left: 3px solid var(--accent);
        }

        /* --- MAIN CONTENT --- */
        .main { flex-grow: 1; padding: 40px; overflow-y: auto; position: relative; }
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 40px; }
        .header h2 { margin: 0; font-size: 2rem; font-weight: 700; color: white; }
        
        .section { display: none; animation: fadeIn 0.4s ease-out; }
        .section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* --- KARTY --- */
        .card {
            background: var(--card-bg); border: 1px solid var(--border);
            border-radius: 20px; padding: 30px; margin-bottom: 30px;
            box-shadow: 0 10px 30px -10px rgba(0,0,0,0.5);
        }
        .card-title { 
            font-size: 1.1rem; font-weight: 700; margin-bottom: 25px; padding-bottom: 15px; 
            border-bottom: 1px solid var(--border); color: var(--accent); 
        }

        /* --- FORMULARZE --- */
        .grid-form { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px; }
        
        input, select, textarea {
            width: 100%; padding: 14px; border: 1px solid var(--border); border-radius: 12px;
            background: rgba(0,0,0,0.3); color: white; font-family: inherit; font-size: 0.95rem;
            transition: 0.3s; box-sizing: border-box;
        }
        input:focus { border-color: var(--accent); outline: none; background: rgba(0, 212, 255, 0.05); }

        .btn {
            padding: 12px 28px; border: none; border-radius: 12px; cursor: pointer;
            font-weight: 700; font-size: 0.9rem; transition: 0.3s; text-transform: uppercase; letter-spacing: 1px;
        }
        .btn-primary { background: linear-gradient(135deg, var(--primary), #2563eb); color: white; }
        .btn-success { background: linear-gradient(135deg, #059669, var(--success)); color: #000; }
        .btn-danger { background: rgba(239, 68, 68, 0.2); color: var(--danger); border: 1px solid var(--danger); }
        .btn-warning { background: rgba(245, 158, 11, 0.2); color: var(--warning); border: 1px solid var(--warning); }
        .btn:hover { transform: translateY(-2px); filter: brightness(120%); }

        /* --- MECZE & TABELE --- */
        .match-card {
            background: rgba(255,255,255,0.02); border: 1px solid var(--border); border-radius: 16px;
            padding: 20px; margin-bottom: 15px; display: flex; align-items: center; justify-content: space-between;
        }
        .styled-table { width: 100%; border-collapse: separate; border-spacing: 0 8px; }
        .styled-table th { text-align: left; padding: 15px; color: var(--text-muted); font-size: 0.8rem; text-transform: uppercase; }
        .styled-table td { background: rgba(255,255,255,0.03); padding: 15px; border-top: 1px solid var(--border); border-bottom: 1px solid var(--border); }
        .styled-table tr td:first-child { border-top-left-radius: 10px; border-bottom-left-radius: 10px; border-left: 1px solid var(--border); }
        .styled-table tr td:last-child { border-top-right-radius: 10px; border-bottom-right-radius: 10px; border-right: 1px solid var(--border); }
    </style>
</head>
<body>

<div id="login-screen">
    <div class="login-card">
        <h2><i class="fas fa-shield-alt"></i> PANEL MANAGERA</h2>
        <input type="email" id="login-email" placeholder="Adres E-mail" style="margin-bottom:15px;">
        <input type="password" id="login-password" placeholder="Hasło dostępu" style="margin-bottom:25px;">
        <button class="btn btn-primary" style="width:100%" onclick="login()">Zaloguj się</button>
        <p id="login-msg" style="color:var(--danger); margin-top:15px; font-size:0.9rem;"></p>
    </div>
</div>

<div id="app-container" style="display:none; width:100%; height:100%;">
    
    <nav class="sidebar">
        <div class="logo"><i class="fas fa-trophy"></i> Puchar Gwiazd</div>
        <button class="menu-btn active" onclick="switchTab('matches', this)"><i class="fas fa-calendar-alt"></i> Mecze</button>
        <button class="menu-btn" onclick="switchTab('tables', this)"><i class="fas fa-list-ol"></i> Tabele</button>
        <button class="menu-btn" onclick="switchTab('teams', this)"><i class="fas fa-users"></i> Drużyny</button>
        <button class="menu-btn" onclick="switchTab('news', this)"><i class="fas fa-newspaper"></i> Newsy</button>
        <button class="menu-btn" onclick="switchTab('settings', this)"><i class="fas fa-cogs"></i> Ustawienia</button>

        <div style="margin-top:auto; padding-top:20px; border-top:1px solid var(--border);">
            <div style="font-size:0.8rem; color: var(--text-muted);">Zalogowany jako:</div>
            <div id="userEmail" style="color: var(--accent); font-weight:600; margin-bottom:15px; word-break:break-all;">...</div>
            <button class="btn-danger" style="width:100%; padding: 10px;" onclick="logout()">Wyloguj</button>
        </div>
    </nav>

    <main class="main">
        <div class="header">
            <h2 id="page-title">Mecze</h2>
            <button class="btn-refresh" onclick="window.location.reload()" title="Odśwież" style="background:transparent; border:none; color:white; cursor:pointer;"><i class="fas fa-sync-alt"></i></button>
        </div>

        <div id="tab-matches" class="section active">
            <div class="card">
                <div class="card-title"><span><i class="fas fa-plus"></i> Edycja Meczu</span></div>
                <input type="hidden" id="matchId">
                <div class="grid-form">
                    <div><label>Gospodarz</label><select id="homeTeamSelect"></select></div>
                    <div><label>Gość</label><select id="awayTeamSelect"></select></div>
                    <div><label>Data</label><input type="date" id="matchDate"></div>
                    <div><label>Status</label>
                        <select id="matchStatus" onchange="toggleScoreInputs()">
                            <option value="planned">Planowany</option>
                            <option value="live">NA ŻYWO</option>
                            <option value="finished">Zakończony</option>
                        </select>
                    </div>
                </div>
                <div id="scoreInputs" class="grid-form" style="margin-top:20px; display:none; border-top:1px solid var(--border); padding-top:20px;">
                    <div><label>Gole Gospodarzy</label><input type="number" id="homeScore" value="0"></div>
                    <div><label>Gole Gości</label><input type="number" id="awayScore" value="0"></div>
                </div>
                <div style="margin-top:25px; display:flex; gap:10px;">
                    <button class="btn btn-primary" id="saveMatchBtn" onclick="saveMatch()">Zapisz Mecz</button>
                    <button class="btn btn-warning" id="cancelMatchBtn" onclick="resetMatchForm()" style="display:none;">Anuluj</button>
                </div>
            </div>
            <div id="matchesContainer"></div>
        </div>

        <div id="tab-tables" class="section">
            <div class="card">
                <div class="card-title"><span>Tabela Ligowa</span></div>
                <table class="styled-table">
                    <thead><tr><th>Poz</th><th>Drużyna</th><th>M</th><th>PKT</th></tr></thead>
                    <tbody id="standingsBody"></tbody>
                </table>
            </div>
            <div class="card">
                <div class="card-title"><span>Strzelcy</span></div>
                <table class="styled-table">
                    <thead><tr><th>#</th><th>Zawodnik</th><th>Gole</th></tr></thead>
                    <tbody id="topScorersBody"></tbody>
                </table>
            </div>
        </div>

        <div id="tab-teams" class="section">
            <div class="card">
                <div class="card-title"><span>Dodaj Drużynę (Baza)</span></div>
                <div class="grid-form" style="grid-template-columns: 2fr 2fr 1fr;">
                    <input type="text" id="teamNameInput" placeholder="Nazwa">
                    <input type="text" id="teamLogoInput" placeholder="URL Logo">
                    <button class="btn btn-success" onclick="addTeam()">Dodaj</button>
                </div>
            </div>
            <div id="teamsList" class="grid-form"></div>
            
            <div id="squad-editor" class="card" style="display:none; border: 2px solid var(--accent);">
                <div class="card-title">
                    <span>Kadra: <span id="squadTeamName"></span></span>
                    <button class="btn-warning" onclick="closeSquadEditor()" style="padding:5px 10px; border:none; border-radius:5px; cursor:pointer;">X</button>
                </div>
                <div class="grid-form">
                    <input type="text" id="plName" placeholder="Imię Nazwisko">
                    <input type="number" id="plNum" placeholder="Nr">
                    <button class="btn btn-primary" onclick="addPlayer()">Dodaj</button>
                </div>
                <div id="playersList" style="margin-top:20px;"></div>
            </div>
        </div>

        <div id="tab-news" class="section">
            <div class="card">
                <div class="card-title"><span>Nowy Artykuł</span></div>
                <input type="text" id="newsTitle" placeholder="Tytuł" style="margin-bottom:10px;">
                <textarea id="newsContent" rows="4" placeholder="Treść..." style="margin-bottom:10px;"></textarea>
                <input type="text" id="newsImg" placeholder="Link do zdjęcia">
                <button class="btn btn-success" style="margin-top:15px;" onclick="saveNews()">Publikuj</button>
            </div>
            <div id="newsList"></div>
        </div>

        <div id="tab-settings" class="section">
            <div class="card">
                <div class="card-title"><span>Opcje Ligi</span></div>
                <div style="display:flex; align-items:center; gap:10px;">
                    <input type="checkbox" id="lockSquads" onchange="toggleLock()" style="width:20px; height:20px;">
                    <label for="lockSquads">Zablokuj edycję składów dla Team Managerów</label>
                </div>
            </div>
            
            <div class="card">
                <div class="card-title"><span><i class="fas fa-user-plus"></i> Rejestracja Drużyny i Managera</span></div>
                <p style="color:var(--text-muted); font-size:0.85rem; margin-bottom:20px;">
                    Tutaj utworzysz konto dla managera ORAZ stworzysz strukturę drużyny w bazie danych.
                </p>

                <div class="grid-form" style="grid-template-columns: 1fr 1fr;">
                    <div style="grid-column: span 2; border-bottom:1px solid var(--border); padding-bottom:5px; margin-top:10px;">
                        <span style="color:var(--accent);">1. Konto Team Managera</span>
                    </div>
                    <input type="email" id="accEmail" placeholder="Email (Login)">
                    <input type="password" id="accPass" placeholder="Hasło">

                    <div style="grid-column: span 2; border-bottom:1px solid var(--border); padding-bottom:5px; margin-top:20px;">
                        <span style="color:var(--success);">2. Dane Drużyny</span>
                    </div>
                    <input type="text" id="accTeamName" placeholder="Pełna nazwa (np. Goon FC)">
                    <input type="text" id="accTeamId" placeholder="ID (np. TEAM05)">
                </div>

                <div style="margin-top:25px;">
                    <button class="btn btn-primary" style="width:100%;" onclick="createAccountAndTeam()">UTWÓRZ WSZYSTKO</button>
                </div>
            </div>
        </div>

    </main>
</div>

<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
<script src="admin.js"></script>

<script>
    function switchTab(id, btn) {
        document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
        document.querySelectorAll('.menu-btn').forEach(b => b.classList.remove('active'));
        document.getElementById('tab-'+id).classList.add('active');
        if(btn) btn.classList.add('active');
        const titles = {matches: "Mecze", tables: "Tabele", teams: "Drużyny", news: "Newsy", settings: "Ustawienia"};
        document.getElementById('page-title').innerText = titles[id];
    }
</script>
</body>
</html>
